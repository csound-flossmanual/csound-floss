# 09 Hello If


## What you learn in this tutorial

- How you can work with if-then in Csound


## One instance calls the next ...

In the last Tutorial we have instroduced the `schedule` opcode which calls
an instrument instance.

We have put the `schedule` code outside the instrument code. In this case,
it works like a score line.

But what will happen if we put a `schedule` statement also inside an instrument?

Try this:

~~~csound
<CsoundSynthesizer>
<CsOptions>
-o dac
</CsOptions>
<CsInstruments>

sr = 44100
ksmps = 64
nchnls = 2
0dbfs = 1

instr InfiniteCalls
  //play a simple tone
  aSine = poscil:a(.2,415)
  aOut = linen:a(aSine,0,p3,p3)
  outall(aOut)
  //call the next instance after 3 seconds
  schedule("InfiniteCalls",3,2)
endin
schedule("InfiniteCalls",0,2)

</CsInstruments>
<CsScore>
</CsScore>
</CsoundSynthesizer>
~~~

An infinite chain of calls is triggered.

The first call must be outside the instrument:

    schedule("InfiniteCalls",0,2)

This line of code calls the first instance of instrument "InfiniteCalls".

But inside this instrument, again we have an instrument call. Three seconds
after the instrument instance is created, the next instance will be there:

    schedule("InfiniteCalls",3,2)

Note that the start time of the new instance is very important here. If you 
set it to 2 seconds instead of 3 seconds, it will create the next instance 
immediately after the current one. If you set the start time of the next
instance to 1 second, two instances will overlap.


## Schedule depending on conditions

This self-scheduling is a very interesting feature in Csound, but usually
we do not want it to be infinite. Instead, we want to make it depending on 
a certain condition.

We will implement now an instrument which triggers itself again six times.
This is what we must do:

- We must pass the number 6 as count variable to the instrument instance.
- The next instance is then called with number 5 as count variable.
- If the instance with count variable 1 is there, no more instances are called.

We can draw this program flow:

![Program flow for conditional re-triggering of instrument instances](../resources/images/01-GS-09-a.png)


## The 'if' opcode in Csound

We can implement this limited chain of self-scheduling instances with the help
of the `if` opcode. Try out this example by running and changing the *iCount*
variable from 6 to 1, and look at the output.

~~~csound
<CsoundSynthesizer>
<CsOptions>
-o dac -m 128
</CsOptions>
<CsInstruments>

sr = 44100
ksmps = 64
nchnls = 2
0dbfs = 1

instr TryMyIf
  iCount = 6
  if (iCount > 1) then
	prints("True!\n")
  else
    prints("False!\n")
  endif
endin

</CsInstruments>
<CsScore>
i "TryMyIf" 0 0
</CsScore>
</CsoundSynthesizer>
~~~

If you want to read more about conditional branching with `if` have a look at
[this](/csound-language/control-structures#if---then---elseif---then---else)
section in [Chapter 03](/csound-language/initialization-and-performance-pass) 
of this book.


## Example

Please run the example and read the code.  
Can you figure out in which way the *iCount* variable is modified?  
Which other parameters are changed from instance to instance?

~~~csound
<CsoundSynthesizer>
<CsOptions>
-o dac -m 128
</CsOptions>
<CsInstruments>

sr = 44100
ksmps = 64
nchnls = 2
0dbfs = 1

instr Hello
  iMidiStart = p4
  iMidiEnd = p5
  kDb = linseg:k(-10,p3/2,-20)
  kMidi = linseg:k(iMidiStart,p3/3,iMidiEnd)
  aSine = poscil:a(ampdb(kDb),mtof(kMidi))
  aOut = linen:a(aSine,0,p3,1)
  outall(aOut)
  
  iCount = p6
  print(iCount)
  if (iCount > 1) then
	schedule("Hello",p3,p3+1,iMidiStart-1,iMidiEnd+2,iCount-1)
  endif
endin
schedule("Hello", 0, 2, 72, 68, 6)

</CsInstruments>
<CsScore>
</CsScore>
</CsoundSynthesizer>
~~~


## Try it yourself

Change the code so that from instance to instance

- the distance in time between two instances increases
- the distance in time between two instances descreases in the ratio 1/2
(so that the instance 3 has only half the distance to instance 2 as instance
2 had to instance 1)
- the duration increases in the ratio 3/2
- the first MIDI pitch increases by two semitones whilst
- the second MIDI pitch decreases by onw semitone


## Opcodes you have learned in this tutorial

- `if ... then ... [else] ... endif` conditional branch 


## Go on now ...

with the next tutorial: [10 Hello Random](01-GS-10.md).


## ... or read some more explanations here

### If and elseif


### Nested 'if'



### A short form 
