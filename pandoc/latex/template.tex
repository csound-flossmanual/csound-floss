%% \makeatletter
%% \renewcommand{\@seccntformat}[1]{}
%% \makeatother
%% \PassOptionsToPackage{hyphens}{url}
%% \PassOptionsToPackage{usenames,dvipsnames,svgnames*,x11names*}{xcolor}


%% documentclass
\renewcommand{\linethickness}{0.05pt}
\documentclass[UTF8,17pt,english,a4,twoside,openright]{book}

\usepackage{textcomp} % provide euro and other symbols
\usepackage{parskip} % sensible indent and break in paragraphs
\usepackage{pgfpages}

%% unordered list character
\usepackage{pifont}
\renewcommand\labelitemi{\ding{228}}

\usepackage{geometry}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=30mm,
 right=30mm,
 top=24mm,
 bottom=24mm,
 }


\usepackage{color}
\usepackage{fancyvrb}
\usepackage{xcolor}
\usepackage{listings}

\definecolor{titlecolor}{RGB}{51,48,0}
\definecolor{anchorcolor}{RGB}{111,81,155}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}

%% \fancyfoot{}
%% \fancyfoot[C]{\robotocondensed\color{titlecolor}\thepage}

\fancyhead[LE,RO]{\robotocondensed\color{titlecolor}\textsl{\rightmark}}
\fancyhead[LO,RE]{\robotocondensed\color{titlecolor}\textsl{\leftmark}}

\usepackage{beamerarticle}
\usepackage{wrapfig}
\usepackage{setspace}
\setstretch{1.25}

\usepackage{fontspec}

\usepackage[sfdefault]{roboto}
\usepackage{FiraMono}
\setmonofont{Fira Mono}

\usepackage{caption}

% These lines are needed to make table captions work with longtable:
\makeatletter
\def\fnum@table{\tablename~\thetable}
\makeatother

\usepackage{graphicx,grffile}
\usepackage{letltxmacro}
\LetLtxMacro{\OldIncludegraphics}{\includegraphics}
\usepackage[export]{adjustbox}
\renewcommand{\includegraphics}[2][]{\OldIncludegraphics[#1, scale=1,keepaspectratio, max width={15.2cm}, max height={6cm}]{#2}}

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\usepackage{hyperref}
%% \usepackage[colorlinks]{hyperref}

%% \setcounter{secnumdepth}{-2}

%% FOOTER STUFF
\usepackage{longtable,booktabs}
\usepackage{footnote}
\usepackage{chngcntr}
%% \fancyfoot[C]{\robotocondensed\color{titlecolor}\thepage}
\counterwithin*{footnote}{subsection}
%% These two are to compensate for
%% internal counter changes
\counterwithout{section}{chapter}
%% \counterwithout{figure}{chapter}
%% \counterwithout{table}{chapter}

%% https://tex.stackexchange.com/a/141938
\addtolength{\footnotesep}{2mm}
\renewcommand{\thefootnote}{\textbf{\arabic{footnote}}}
\usepackage[flushmargin]{footmisc}
\newcommand{\hr}{\begin{center} \line(1,0){450} \end{center}}
%% END OF FOOTER STUFF


\makesavenoteenv{longtable}
\usepackage{unicode-math}


\hypersetup{
  pdftoolbar=true,
  pdfmenubar=true,
  pdfstartview=FitH,
  pdffitwindow=true,
  colorlinks=true,
  breaklinks=true,
  pdfcreator={LaTeX via pandoc},
  allcolors=anchorcolor,
}

\usepackage{framed}
%% \VerbatimFootnotes

$if(highlighting-macros)$
$highlighting-macros$
$endif$

\usepackage{graphicx}

$for(header-includes)$
$header-includes$
$endfor$


\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\patchcmd{\@footnotetext}{\footnotesize}{\footnotesize\sffamily}{}{}
\makeatother

\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
%% https://tex.stackexchange.com/a/444226
\renewcommand{\@seccntformat}[1]{}
\makeatother

\usepackage[raggedright]{titlesec}

\newcommand{\passthrough}[1]{\lstset{mathescape=false}#1\lstset{mathescape=true}}

\usepackage{titlesec}

\titleformat*{\chapter}{\robotocondensed\color{titlecolor}\fontsize{20}{22}\selectfont\bfseries}
\titleformat*{\section}{\robotocondensed\color{titlecolor}\fontsize{16}{19}\selectfont\bfseries}
\titleformat*{\subsection}{\robotocondensed\color{titlecolor}\fontsize{14}{16}\selectfont\bfseries}

\let\\=\newline

\begin{document}
$for(include-before)$
$include-before$
$endfor$

$body$

$for(include-after)$
$include-after$
$endfor$
\end{document}
